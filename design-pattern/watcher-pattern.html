<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>发布订阅模式（观察者模式）</title>
</head>
<body>
定义对象间的一种一对多的依赖关系

ps: 自己先写一个试试
<script>
    function Publisher () {}
    Publisher.prototype.listener = {};
    Publisher.prototype.addListener = function(eventName, funcb) {
        let __self = this;
        if (typeof funcb === 'function') {
            if (!this.listener.eventName) {
                this.listener.eventName = [];
            } 
            this.listener.eventName.push(funcb);
            
           
        }
        // this.listener.push(funcb);
    }
    Publisher.prototype.pub = function(eventName, data) {
        let funcArr = this.listener.eventName;
        if (funcArr.length) {
            funcArr.forEach((fun, index) => {
                fun(data);
            });
        }
    }
    let subscribe = new Publisher();
    subscribe.addListener('click', function(data) {
        console.log('data', data);
    });
    let puber = new Publisher();
</script>
书中所写
<script>
    var officer = {};
    officer.listener = [];
    // cb 一个个函数就是一个个订阅者
    officer.addListener = function (cb) {
        if (typeof cb === 'function') {
            this.listener.push(cb);
        }
    }
    officer.trigger = function() {
        let __self = this;
        let arg = arguments;
        // 原书这里用的for循环
        this.listener.forEach(function(func, index){
            func.apply(__self, arg);
        });
    }
    officer.addListener(function( price, squareMeter ){ // 小明订阅消息
        console.log( '价格= ' + price );
        console.log( 'squareMeter= ' + squareMeter );
    });
    officer.trigger('20', '1000');
</script>
</body>
</html>